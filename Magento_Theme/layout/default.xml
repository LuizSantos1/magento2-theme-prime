<?xml version="1.0"?>
<page 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">
    <body>
        <!-- Removed elements -->
        <referenceBlock name="report.bugs" remove="true"/>
        <referenceBlock name="currency" remove="true"/>
        <referenceBlock name="top.links" remove="true"/>

        <!-- Updating element classes -->
        <referenceContainer name="header-wrapper" htmlClass="header content flex flex-wrap float-panel" />

        <!-- Header layout modifications -->
        <referenceContainer name="header-wrapper">
            <container name="header-wrapper.logo" as="logo-wrapper" htmlTag="div" htmlClass="flex-item logo-wrapper"/>
            <container name="header-wrapper.search" as="search-wrapper" htmlTag="div" htmlClass="flex-item search-wrapper" />
            <container name="header-wrapper.links" as="links-wrapper" htmlTag="div" htmlClass="flex-item links-wrapper">
                <block class="Magento\Framework\View\Element\Template" name="account-dropdown" template="Magento_Theme::account-dropdown.phtml" />
            </container>
        </referenceContainer>

        <!-- Moved elements -->
        <move element="logo" destination="header-wrapper.logo" before="-"/>
        <move element="top.search" destination="header-wrapper.search"/>
        <move element="minicart" destination="header-wrapper.links" after="-"/>
        <move element="authorization-link" destination="account-dropdown"/>
        <move element="register-link" destination="account-dropdown"/>
        <move element="my-account-link" destination="account-dropdown"/>
        <move element="wish-list-link" destination="account-dropdown"/>
        <move element="multiple-wish-list-link" destination="account-dropdown"/>
        <move element="catalog.compare.link" destination="header-wrapper.search"/>
                
        <!-- Preheader message -->
        <referenceContainer name="header.panel">        
            <container name="preheader" htmlTag="div" htmlClass="preheader">
                <block class="Magento\Framework\View\Element\Template" name="preheader.message" template="Magento_Theme::html/preheader.phtml" />
            </container>
        </referenceContainer>
    </body>
</page>